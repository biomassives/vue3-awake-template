<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Biodiversity Market Model</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tippy.js/6.3.7/tippy-bundle.umd.min.js" integrity="sha512-gbruucq/Opx9jlHfqqZeAg2LNK3Y4BbpXHKDhRC88/tARL/izPOE4Zt2w6X9Sn1UeWaGbL38zW7nkL2jdn5JIw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tippy.js/6.3.7/tippy.min.css" integrity="sha512-HbPh+j4V7pXprvQMt2dtmK/zCEsUeZWYXRln4sOwmoyHPQAPqy/k9lIquKUyKNpNbDGAY06UdiDHcEkBc72yCQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />    <script src="https://cdnjs.cloudflare.com/ajax/libs/tippy.js/6.3.7/tippy-bundle.umd.min.js" integrity="sha512-gbruucq/Opx9jlHfqqZeAg2LNK3Y4BbpXHKDhRC88/tARL/izPOE4Zt2w6X9Sn1UeWaGbL38zW7nkL2jdn5JIw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>    <script>mermaid.initialize({startOnLoad:true});</script>

    
    <style>
        .mermaid {
            width: 70%;
            float: left;
        }
        .info-panel {
            width: 30%;
            float: right;
            padding: 10px;
            box-sizing: border-box;
            display: none; /* Hide by default, show on hover or selection */
        }
        @media (max-width: 768px) {
            .mermaid, .info-panel {
                float: none;
                width: auto;
            }
        }
    </style>
</head>
<body>

<div class="mermaid">
        flowchart TD
            A[Eco Projects Validation] --> |Validate Projects| B[Biodiversity Credit Issuance]
            B --> C[Credit Registry]
            C --> D[Credit Marketplace]
            D --> E[Buy Credits]
            E --> F[Corporate Buyers]
            D --> G[Individual Buyers]
            E --> H[Invest in Conservation Projects]
            H --> I[Project Implementation]
            I --> J[Monitoring and Reporting]
            J --> K[Reinvestment or Profit Sharing]
            B --> L[Generate Additional Credits]
            L --> C

            A --> M[Training for Project Developers]
            M --> A
</div>

<div class="info-panel" id="infoPanel">
    <h3>Information Panel</h3>
    <p>Details about the selected component will appear here.</p>
</div>

<script>
    // Configure Mermaid first
    mermaid.initialize({
        startOnLoad: false
    });

    // After DOM Content Loaded
    document.addEventListener('DOMContentLoaded', function () {
        // Render Mermaid diagrams manually to control the timing
        mermaid.init(undefined, '.mermaid');

        // Wait a bit for the Mermaid diagrams to render
        setTimeout(function() {
            // Now select nodes
            const nodes = document.querySelectorAll('.mermaid svg g');
            nodes.forEach(node => {
                // Assuming the text content of the node is unique and can be used to identify it
                const nodeContent = node.textContent.trim();
                let tooltipContent = '';
                switch(nodeContent) {
                    case 'Node A':
                        tooltipContent = 'Information specific to Node A.';
                        break;
                    case 'Node B':
                        tooltipContent = 'Details about Node B and its significance.';
                        break;
                    case 'Node C':
                        tooltipContent = ''; // No tooltip for Node C
                        break;
                    default:
                        tooltipContent = 'General information about this node.';
                }

                if (tooltipContent) {
                    tippy(node, {
                        content: tooltipContent,
                        allowHTML: true,
                        interactive: true,
                        placement: 'right',
                        onShow(instance) {
                            document.getElementById('infoPanel').innerHTML = instance.props.content;
                            document.querySelector('.info-panel').style.display = 'block';
                        },
                        onHide() {
                            document.querySelector('.info-panel').style.display = 'none';
                        },
                    });
                }
            });
        }, 500); // Adjust timeout as needed based on actual rendering time
    });
</script>


</body>
</html>
